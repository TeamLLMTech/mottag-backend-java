<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Patio CRUD</title>
    <link
      th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}"
      rel="stylesheet"
    />
    <script
      th:src="@{/webjars/bootstrap/5.3.3/js/bootstrap.bundle.min.js}"
      defer
    ></script>
  </head>

  <body
    style="
      background: linear-gradient(135deg, #f8fafc 0%, #e2eafc 100%);
      min-height: 100vh;
    "
  >
    <div th:replace="fragments/navbar :: navbar"></div>

    <div class="container mt-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold text-success">Lista de Pátios</h2>
        <a
          class="btn btn-gradient-green btn-lg shadow"
          th:href="@{/patios-page/new}"
        >
          <i class="bi bi-plus-circle me-2"></i>Novo Pátio
        </a>
      </div>
      <div class="card shadow-sm rounded-4 border-success">
        <div class="card-body p-0">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Endereço</th>
                <th class="text-center">Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="patio : ${patios}">
                <td th:text="${patio.idPatio}"></td>
                <td th:text="${patio.nome}"></td>
                <td th:text="${patio.endereco}"></td>
                <td class="text-center">
                  <a
                    th:href="@{'/patios-page/edit/' + ${patio.idPatio}}"
                    class="btn btn-outline-warning btn-sm me-1"
                    ><i class="bi bi-pencil-square"></i> Editar</a
                  >
                  <a
                    th:href="@{'/patios-page/delete/' + ${patio.idPatio}}"
                    class="btn btn-outline-danger btn-sm"
                    onclick="return confirm('Confirma exclusão?');"
                    ><i class="bi bi-trash"></i> Excluir</a
                  >
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Formulário de criação/edição -->
    <div class="container mt-5" th:if="${form}">
      <div class="card shadow-lg rounded-4">
        <div class="card-body">
          <h2 class="fw-bold text-success mb-4" th:text="${formTitle}"></h2>
          <form th:action="${formAction}" th:object="${patio}" method="post">
            <div class="row g-3">
              <div class="col-md-4">
                <label for="nome" class="form-label">Nome</label>
                <input
                  type="text"
                  class="form-control"
                  id="nome"
                  th:field="*{nome}"
                  required
                />
              </div>
              <div class="col-md-4">
                <label for="layout" class="form-label">Layout</label>
                <input
                  type="text"
                  class="form-control"
                  id="layout"
                  th:field="*{layout}"
                  required
                />
              </div>
              <div class="col-md-4">
                <label for="endereco" class="form-label">Endereço</label>
                <input
                  type="text"
                  class="form-control"
                  id="endereco"
                  th:field="*{endereco}"
                  required
                />
              </div>
            </div>
            <div class="mt-4 d-flex gap-2">
              <button type="submit" class="btn btn-success btn-lg px-4 shadow">
                Salvar
              </button>
              <a th:href="@{/patios-page}" class="btn btn-secondary btn-lg px-4"
                >Cancelar</a
              >
            </div>
          </form>
        </div>
      </div>
    </div>

    <style>
      .btn-gradient-green {
        background: linear-gradient(90deg, #43ea7c 0%, #1abc5c 100%);
        color: #fff;
        border: none;
      }
      .btn-gradient-green:hover {
        background: linear-gradient(90deg, #1abc5c 0%, #43ea7c 100%);
        color: #fff;
      }
      .card.rounded-4 {
        border-radius: 1.5rem;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
  </body>
</html>
